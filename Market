class Product:
    def __init__(self, name, price, stock):
        self.name = name
        self.price = price
        self.stock = stock

    def __str__(self):
        return f"Product: {self.name} | Price: {self.price} | Stock: {self.stock}"


class Cart:
    def __init__(self):
        self.items = {}

    def add_product(self, product, quantity=1):
        if product.stock >= quantity:
            if product in self.items:
                self.items[product] += quantity
            else:
                self.items[product] = quantity
            product.stock -= quantity
            return True
        return False

    def remove_product(self, product):
        if product in self.items:
            product.stock += self.items[product]
            del self.items[product]
            return True
        return False

    def get_total_price(self):
        total = sum(p.price * qty for p, qty in self.items.items())
        return total

    def show_cart(self):
        if not self.items:
            print("Cart is empty")
        else:
            for product, qty in self.items.items():
                print(f"{product.name}: {qty} x {product.price} = {qty * product.price}")
            print(f"Total: {self.get_total_price()}")


if __name__ == "__main__":
    p1 = Product("Laptop", 25000, 5)
    p2 = Product("Mouse", 800, 10)
    p3 = Product("Monitor", 7500, 2)

    my_cart = Cart()

    my_cart.add_product(p1, 1)
    my_cart.add_product(p2, 2)
    my_cart.add_product(p3, 1)

    my_cart.show_cart()

    my_cart.remove_product(p2)

    print("Карта товарів")
    my_cart.show_cart()
